# Claude 프로젝트 가이드라인

## 1. 프로젝트 개요
본 프로젝트는 **시니어 백엔드 개발자 기준의 프로덕션용 시스템**을 목표로 한다.
실서비스 운영을 전제로 하며, **안정성, 성능, 관측 가능성(Observability)** 을 최우선으로 고려한다.

---

## 2. 기술 스택

- **언어**: Go (최신 안정 버전)
- **웹 프레임워크**: Gin
- **아키텍처**: Clean Architecture (레이어 분리, 의존성 역전)
- **서비스 스타일**: MSA 친화적 설계
- **데이터베이스**: MariaDB 11.x
- **배포 환경**: Docker

---

## 3. 코딩 원칙 (중요)

- **프로덕션 품질 코드만 작성**한다
- 튜토리얼용, 장난감 예제 스타일의 코드는 지양한다
- 마법 같은 추상화보다 **명시적이고 읽기 쉬운 코드**를 우선한다
- 과한 설계는 피하되, **확장성과 운영**을 고려한 구조를 유지한다
- 트래픽이 많고, 장시간 실행되는 서비스를 기본 전제로 한다

---

## 4. Go 언어 규칙

- 표준 Go 프로젝트 레이아웃을 따른다
- 모든 요청 흐름에 `context.Context`를 명확히 사용한다
- 에러는 반드시 명시적으로 처리한다 (무시 금지)
- 상속 흉내 패턴보다는 **컴포지션**을 선호한다
- 불필요한 goroutine 생성을 피한다

---

## 5. 아키텍처 규칙

- 레이어 간 책임을 엄격히 분리한다
  - handler / controller
  - service / usecase
  - repository
  - domain / model
- 상위 레이어는 하위 구현체에 의존하지 않는다
- handler에서 DB에 직접 접근하지 않는다

---

## 6. 데이터베이스 & SQL 규칙

- ORM의 자동 동작에 의존하지 않고 **명시적인 SQL**을 선호한다
- 모든 쿼리는 **인덱스 사용과 실행 계획**을 고려하여 작성한다
- `SELECT *` 사용을 금지한다
- 다음 항목에 특히 주의한다:
  - 암묵적 형 변환
  - WHERE / ORDER BY 절에서의 컬럼 가공
- 대용량 데이터와 파티션 테이블 사용을 기본 전제로 한다

---

## 7. 성능 & 안정성

- 항상 다음 항목을 고려한다:
  - 커넥션 풀링
  - 타임아웃 설정
  - 백프레셔(backpressure)
- SSE, gRPC, TCP 등 스트리밍 연결은 **장시간 연결**을 전제로 설계한다
- 메모리 누수 및 무제한 버퍼 사용을 철저히 방지한다

---

## 8. 동시성 & Goroutine 관리

- 모든 goroutine은 **명확한 생명주기**를 가져야 한다
- graceful shutdown을 반드시 지원한다
- 전역 상태 사용을 최소화한다
- 채널은 무한 대기 상태에 빠지지 않도록 설계한다

---

## 9. 로깅 & 관측성(Observability)

- 로그는 구조화된 형태로 작성한다
- 핫 패스에서의 과도한 로그 출력을 피한다
- 운영 장애 분석에 도움이 되는 로그만 남긴다
- 가능하다면 로그보다 **메트릭과 트레이싱**을 우선한다

---

## 10. 보안 가이드라인

- 모든 외부 입력은 검증 대상이다
- 클라이언트 데이터는 절대 신뢰하지 않는다
- 내부 에러를 그대로 외부에 노출하지 않는다
- 시크릿 정보는 절대 코드에 하드코딩하지 않는다

---

## 11. Claude가 하지 말아야 할 것

- 요청하지 않은 초급자 수준 설명 제공 금지
- 장난감 예제, 의사 코드 남발 금지
- 충분한 근거 없이 아키텍처 방향 변경 금지
- 불필요한 외부 라이브러리 도입 금지

---

## 12. Claude 응답 스타일

- 사용자는 **시니어 백엔드 개발자**임을 전제로 한다
- 간결하고 기술적인 설명을 우선한다
- 이론보다 **실무 트레이드오프와 선택 이유**를 중시한다
- 바로 적용 가능한 가이드를 제공한다

---

## 13. 기본 가정

명확하지 않은 부분은 다음을 기본으로 가정한다:
- 프로덕션 환경
- 고가용성 요구
- 성능과 안정성이 최우선

---

End of guidelines.

